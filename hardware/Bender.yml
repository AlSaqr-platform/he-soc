package:
  name: ariane-soc
  authors:
    - "Luca Valente"

dependencies:
  clint: { path: "deps/clint" }
  util: { path: "deps/util" }
  alsaqr_padframe: { path: "deps/alsaqr_periph_padframe" }
  alsaqr_fpga_padframe: { path: "deps/alsaqr_periph_fpga_padframe" }
  apb_host_control: { path: "deps/apb_host_control_regs" }
  apb_uart: { path: "deps/apb_uart" }
  axi_tlb: { path: "deps/axi_tlb"}
  snooper: { path: "deps/snooper"}
  rv_plic: { path: "deps/rv_plic" }
  axi_riscv_atomics: { git: "https://github.com/pulp-platform/axi_riscv_atomics.git", rev: "062bc36cbcca25629384e7f12efa6693273b3e07" } # branch: master
  cva6: { git: "git@github.com:Alsaqr-platform/cva6.git", rev: alsaqr-v1.0 } # branch: lv/parallel-access, based on branch culsans_pulp of planvtech
  ace: { git: "https://github.com/planvtech/ace.git", rev: "fc2056f9f560ec55192c6b09ef682c822fad90fe" } # branch: pulp
  riscv-dbg: { git: "https://github.com/pulp-platform/riscv-dbg", rev: "358f90110220adf7a083f8b65d157e836d706236" } # version: 0.8.1
  axi: { git: "https://github.com/pulp-platform/axi.git", rev: "39f5f2d51c5e524f6fc5cf8b6e901f7dcc5622d7" } # version: 0.39.6
  fpnew: { git: "https://github.com/pulp-platform/cvfpu.git", rev: a8e0cba6dd50f357ece73c2c955d96efc3c6c315 } # version: pulp-v0.1.3
  tcdm_interconnect: { git: "https://github.com/pulp-platform/cluster_interconnect.git", rev: "7d0a4f8acae71a583a6713cab5554e60b9bb8d27" } # version: 1.2.1
  apb: { git: "https://github.com/pulp-platform/apb.git", rev: "77ddf073f194d44b9119949d2421be59789e69ae" } # version: 0.2.4
  udma_core: { git: "https://github.com/Alsaqr-platform/udma_core.git", rev: "ea1c783641910b5f45f680cd4a7665bc311ab5ec" }
  udma_uart: { git: "https://github.com/Alsaqr-platform/udma_uart.git", rev: "b24d96dc38829005ae165053a8145b1be3683f0b" }
  udma_i2c: { git: "https://github.com/Alsaqr-platform/udma_i2c.git", rev: "a0713d439e11b3b85f0071dc6b59d9fb758633ca" }
  udma_qspi: { git: "https://github.com/Alsaqr-platform/udma_qspi.git", rev: "2d0f67acfcdc5a3ee1c0a925db745f0daffb33cb" }
  udma_sdio: { git: "https://github.com/AlSaqr-platform/udma_sdio.git", rev: "29abf42eeb9d1b793e4f27b8b98da0331eac7f42"}
  udma_camera: { git: "https://github.com/Alsaqr-platform/udma_camera.git", rev: "0339ff06f0b62310d9c6c4b095d46b83064e0a23" }
  udma_filter: { git: "https://github.com/Alsaqr-platform/udma_filter.git", rev: "3e1fe269bcb70a7eef115ca8dc7e668229f04b46" }
  udma_external_per: { git: "https://github.com/Alsaqr-platform/udma_external_per.git", rev: "2b43a6a5b1c6d11dc7a6a6ada5233682adb76447" }
  tech_cells_generic: { git: "https://github.com/pulp-platform/tech_cells_generic.git", rev: "7968dd6e6180df2c644636bc6d2908a49f2190cf" } # version: 0.2.13
  common_cells: { git: "https://github.com/pulp-platform/common_cells.git", rev: "c27bce39ebb2e6bae52f60960814a2afca7bd4cb" } # version: 1.37.0 }
  apb_node: { git: "https://github.com/pulp-platform/apb_node.git", rev: "d436ab3dad8260eadc1288bdc543c79b4d7462c7" }
  apb_gpio: { git: "https://github.com/pulp-platform/apb_gpio.git", rev: "c1feb0b348d15fecce907ae847f78c2f91d43bde" }
  hyperbus_udma: { git: "git@github.com:AlSaqr-platform/hyper_bus.git", rev: "600063d2b2ea3d8447820a94ab046bf532c0da71" } # branch: master
  apb_fll_if: { git: "git@github.com:AlSaqr-platform/apb_fll_if.git", rev: "41e03443848a533df99dbe416b0d8c8ff67bc21e" } #  version: 1.0.1
  register_interface: { git: "git@github.com:pulp-platform/register_interface.git",   rev: "5daa85d164cf6b54ad061ea1e4c6f3624556e467" } # version:  0.4.5
  apb_adv_timer: { git: "https://github.com/pulp-platform/apb_adv_timer.git", rev: "c8faec1e1755386d0e0f31a55ebd80612a3dcea9" } # version: 1.0.4
  can_bus: { git: "git@github.com:alsaqr-platform/can_bus.git", rev: "0ec0bf8b7dab6d5e4b3f7ec58338a8efee066379" }
  common_pads: { git: "git@github.com:AlSaqr-platform/common_pads.git", rev: "4ce2907ab2313e67836e251f6deea67d885aef5f" } # version: 0.0.4
  opentitan: { git: "https://github.com/AlSaqr-platform/opentitan.git", rev: "43cc146123965eb518b6e5ff63dd2dbf596e551f" } # branch: alsaqr-2
  axi_scmi_mailbox: { git: "git@github.com:AlSaqr-platform/axi_scmi_mailbox.git", rev: "96650c4c39dcfc683e48015abb1453d182c1d837" }
  ethernet: { git: "git@github.com:AlSaqr-platform/ethernet.git", rev: "f2c8a5040596476ee1769292a7c48df9b1c05949" }
  sdio_vip: { git: "git@github.com:AlSaqr-platform/sdio_vip.git", rev: "9793d5f0ac7c72bf06a5ebfedf242dae42eb57f7" }
  riscv-iommu:  { git: "git@github.com:AlSaqr-platform/riscv-iommu.git", rev: "2b91818bf" } # branch: mc/bug-fix
  riscv-iopmp:  { git: "git@github.com:AlSaqr-platform/riscv-iopmp.git", rev: "a4ceb98da" } # branch: mc/latch-mem
  riscv-aia: { git: "git@github.com:AlSaqr-platform/riscv-aia.git", rev: "9ab99c13a" } # branch: alsaqr
  idma: { git: "git@github.com:alsaqr-platform/iDMA.git", rev: "559f94af" } # branch: alsaqr-2
  # APMU_BLOCK START: Branch: uw/pmu
  axi_llc: { git: "git@github.com:alsaqr-platform/axi_llc.git", rev: "29fd76fb438c91c692108c1f93ab221931653c5d" } #branch: master
  spu: { git: "git@github.com:alsaqr-platform/spu.git", rev: "e213cb2e10d713531b718fdaddacdbd605f23ff6" } #branch: mc/ace-support
  apmu: { git: "git@github.com:alsaqr-platform/apmu.git", rev: "f8d57d3ede962e50e90aa037d55acc37b98f09c7" } #branch: alsaqr-2

workspace:
  package_links:
    opentitan: opentitan

  checkout_dir: ip_list

export_include_dirs:
  - include/

sources:
  - include/ariane_soc_pkg.sv
  - include/apb_soc_pkg.sv
  - include/pulp_interfaces.sv
  - include/ariane_axi_soc_pkg.sv
  - include/axi_ext_intf.sv
  - include/udma_subsystem_pkg.sv
  - include/gpio_pkg.sv
  - include/tcdm_macros.sv
  - host/axi2tcdm_wrap.sv
  - host/tcdm_demux.sv
  - host/ariane_peripherals.sv
  - host/udma_subsystem.sv
  - host/dma_core_wrap.sv
  - host/axi_lite_cdc_src_alsaqr_intf.sv
  - deps/axi2apb/src/axi2apb.sv
  - deps/axi2apb/src/axi2apb_64_32.sv
  - deps/axi2apb/src/axi2apb_wrap.sv
  - deps/axi_slice/src/axi_w_buffer.sv
  - deps/axi_slice/src/axi_b_buffer.sv
  - deps/axi_slice/src/axi_slice_wrap.sv
  - deps/axi_slice/src/axi_slice.sv
  - deps/axi_slice/src/axi_single_slice.sv
  - deps/axi_slice/src/axi_ar_buffer.sv
  - deps/axi_slice/src/axi_r_buffer.sv
  - deps/axi_slice/src/axi_aw_buffer.sv
  - deps/apb_timer/apb_timer.sv
  - deps/apb_timer/timer.sv
  - host/bootrom/bootrom.sv
  - deps/monitor_counters_t/rtl/monitor_counters_t_reg_pkg.sv
  - deps/monitor_counters_t/rtl/monitor_counters_t_reg_top.sv
  - deps/monitor_counters_t/rtl/monitor_counters_t_event.sv
  - deps/monitor_counters_t/rtl/monitor_counters_t_core.sv
  - deps/monitor_counters_t/rtl/monitor_counters_t.sv
  - deps/htm_block/rtl/htm_block_reg_pkg.sv
  - deps/htm_block/rtl/htm_block_reg_top.sv
  - deps/htm_block/rtl/sdr_logical_module.sv
  - deps/htm_block/rtl/sdr_control_fsm.sv
  - deps/htm_block/rtl/ones_count_status.sv
  - deps/htm_block/rtl/sdr_counter.sv
  - deps/htm_block/rtl/fifo_indexes_output_prioriy_encoder.sv
  - deps/htm_block/rtl/sdr_module.sv
  - deps/htm_block/rtl/htm_reg_adaptor.sv
  - deps/htm_block/rtl/htm_block.sv
  - host/periph_bus_wrap.sv
  - host/freqmeter.sv
  - host/fll_dummy.sv
  - host/alsaqr_clk_rst_gen.sv
  - host/rstgen_bypass_ckg.sv
  - host/rstgen_ckg.sv
  - host/apb_soc_control.sv
  - host/apb_subsystem.sv
  - host/gpio2padframe.sv
  - host/cva6_synth_wrap.sv
  - host/l3_onchip_subsystem.sv
  - host/cva6_subsystem.sv
  - host/l2_subsystem.sv
  - host/clk_gen_hyper.sv
  - host/axi_lite_subsystem.sv
  - host/host_domain.sv
  - host/pad_frame.sv
  - host/al_saqr.sv

  - target: all(fpga, xilinx, ddr, not(asic))
    defines:
      XILINX_DDR: ~
      FPGA_TARGET_XILINX: ~
      WT_DCACHE: ~
      FPGA_EMUL: ~
      PULP_FPGA_EMUL: ~
    files:
      - deps/pad_functional_xilinx/pad_functional_xilinx.sv
      - fpga/ddr/fpga_clk_gen.sv
      - fpga/ddr/boot_rom.sv
      - fpga/ddr/axi_flat.sv
      - fpga/ddr/alsaqr_xilinx.sv

  - target: all(fpga,xilinx, not(asic), not(ddr))
    defines:
      FPGA_TARGET_XILINX: ~
      WT_DCACHE: ~
      FPGA_EMUL: ~
      PULP_FPGA_EMUL: ~
      EXCLUDE_DDR: ~
    files:
      - deps/pad_functional_xilinx/pad_functional_xilinx.sv
      - fpga/ddr/fpga_clk_gen.sv
      - fpga/ddr/boot_rom.sv
      - fpga/alsaqr_xilinx.sv

  # MACRO TEST + NETLIST FLL
  - target: all(asic, not(all(fpga, xilinx)))
    defines:
      WT_DCACHE:   ~
      GF22_FLL:    ~
      TARGET_ASIC: ~
    files:
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v
      - host/alsaqr_clk_rst_gen.sv
      - host/apb_subsystem.sv
      - gf22/macro_wrap/r2pv_wrap_gf22.sv
      - gf22/macro_wrap/memwrap_gf22.sv
      - gf22/macro_wrap/tc_sram_gf22.sv
      - gf22/macro_wrap/tc_clk_gf22.sv
      - gf22/macro_wrap/configurable_delay_gf22.sv

  # RTL + FLL BEHAVIOURAL (YOU NEED ACCESS TO THE PRIVATE FLL REPO FOR THIS)
  - target: gf22_fll_behav
    defines:
      GF22_FLL: ~
    files:
      - host/alsaqr_clk_rst_gen.sv
      - host/apb_subsystem.sv

  # RTL + FLL NETLIST
  - target: post_synth_fll
    defines:
      GF22_FLL: ~
    files:
      - host/alsaqr_clk_rst_gen.sv
      - host/apb_subsystem.sv
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v

  # ONLY NETLSISTS: TOP - FLL - CVA6 -OPENTITAN - CLUSTER - HYPER
  - target: post_synth_all
    files:
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v
      - gf22/synopsys/culsans/trial/netlists/cva6_synth_wrap.v
      - gf22/synopsys/opentitan/trial/netlists/security_island.v
      - gf22/synopsys/cluster/trial/netlists/pulp_cluster.v
      - gf22/synopsys/top/trial/netlists/alsaqr_chip.v

  # RTL: OPENTITAN - CLUSTER - CVA6  / NETLIST: TOP - FLL - HYPER
  - target: post_synth_top
    files:
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v
      - gf22/synopsys/top/trial/netlists/alsaqr_chip.v

  # RTL: TOP - CLUSTER - OPENTITAN - FLL BEHAV (YOU NEED ACCESS TO THE FLL REPO FOR THIS)  / NETLIST: CVA6 - HYPER
  - target: post_synth_cva6_hyper
    defines:
      TARGET_POST_SYNTH_SIM: ~
      GF22_FLL: ~
    files:
      - host/alsaqr_clk_rst_gen.sv
      - host/apb_subsystem.sv
      - gf22/synopsys/culsans/trial/netlists/cva6_synth_wrap.v
      - ip_list/hyperbus_udma/src/hyperbus_udma.sv
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v

  # RTL: TOP - CLUSTER - OPENTITAN / NETLIST: CVA6 - HYPER - FLL
  - target: post_synth_cva6_hyper_fll
    defines:
      TARGET_POST_SYNTH_SIM: ~
      GF22_FLL: ~
    files:
      - ip_list/hyperbus_udma/src/hyperbus_udma.sv
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v
      - host/alsaqr_clk_rst_gen.sv
      - host/apb_subsystem.sv
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v
      - gf22/synopsys/culsans/trial/netlists/cva6_synth_wrap.v

  # RTL: CVA6 - HYPER - FLL (YOU NEED ACCESS TO THE FLL REPO FOR THIS) - OPENTITAN / NETLIST: TOP - HYPER
  - target: post_synth_top_fll_behav
    files:
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v
      - gf22/synopsys/top/trial/netlists/alsaqr_chip.v

  # RTL: TOP (USES FLL DUMMY) + CVA6 NETLIST
  - target: post_synth_cva6
    files:
      - gf22/synopsys/culsans/trial/netlists/cva6_synth_wrap.v

  # RTL (USES FLL DUMMY) + OPENTITAN NETLIST
  - target: post_synth_opentitan
    files:
      - gf22/synopsys/opentitan/trial/netlists/security_island.v

  # RTL (USES FLL DUMMY) + CLUSTER NETLIST
  - target: post_synth_cluster
    files:
      - gf22/synopsys/cluster/trial/netlists/pulp_cluster.v

  # RTL (USES FLL DUMMY) + HYPER NETLIST
  - target: post_synth_hyper
    defines:
      TARGET_POST_SYNTH_SIM: ~
    files:
      - ip_list/hyperbus_udma/src/hyperbus_udma.sv
      - gf22/synopsys/hyperbus/trial/netlists/hyperbus_async_macro.v

  # NOT TESTED YET
  - target: top_post_pr_sim
    files:
      - gf22/synopsys/fll/model/DCO_Model_v1p0.vhd
      - gf22/synopsys/fll/netlists/gf22_fll.v
      - gf22/innovus/hyperbus/out/hyperbus_synth_wrap.v
      - gf22/innovus/culsans/out/culsans_synth_wrap.v
      - gf22/innovus/opentitan/out/security_island.v
      - gf22/innovus/cluster/out/pulp_cluster.v
      - gf22/innovus/top/out/alsaqr_chip.v

  - target: vip
    files:
      - tb/vips/hyperram_model/s27ks0641.v
      - tb/vips/i2c_eeprom/24FC1025.v
      - tb/vips/spi_flash/s25fs256s.v
      - tb/vips/camera/cam_vip.sv

  - target: test
    files:
      - tb/common/uart.sv
      - tb/common/SimDTM.sv
      - tb/common/SimJTAG.sv
      - tb/common/jtag_pkg.sv
      - tb/common/jtag_intf.sv
      - tb/common/mock_uart.sv

  - target: tb_synth
    defines:
      TARGET_TOP_POST_SYNTH_SIM: ~
      TARGET_POST_SYNTH_SIM_TOP: ~
      EXCLUDE_PADFRAME: ~
      TARGET_ASIC: ~
    files:
      - tb/ariane_tb.sv

  # To be fixed for the new padframe
  - target: tb
    files:
      - tb/ariane_tb.sv
